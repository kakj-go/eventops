version: 1.1
name: echo

contexts:
  - name: env
    type: env
  - name: file
    type: file

inputs:
  - name: env
    type: env
  - name: file
    type: file

dag:
  - name: echo
    needs:
      - root

tasks:
  - alias: echo
    type: os
    commands:
      - echo "${{ inputs.env }}"
      - echo "${{ inputs.file }}"
      - ${{ contexts.env }}
      - ${{ contexts.file }}
    outputs:
      - name: env
        value: TEST_RUN_USER
        type: env
        setToContext: env
      - name: file
        value: /root/file
        type: file
        setToContext: file

outputs:
  - name: env
    value: ${{ outputs.echo.env }}
  - name: file
    value: ${{ outputs.echo.file }}